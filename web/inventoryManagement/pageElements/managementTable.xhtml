<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <div onload="#{manageTable.findAll()}">
        <h:form id="accountManagementForm">
            <p:dataTable var="itemType" value="#{manageTable.inventoryItems}" scrollable="true">
                <f:facet name="header">  
                    <h:outputText value="Inventory"/>  
                </f:facet>
                <p:subTable var="item" value="#{itemType.items}"> 
                    <f:facet name="header">  
                        <h:outputText value="#{itemType.typeName}"/>    
                    </f:facet>
                    <p:columnGroup type="header">
                        <p:row>
                            <p:column headerText="Barcode" />
                            <p:column headerText="Condition" />
                            <p:column headerText="Status" />
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}" rendered="#{manageTable.columnRendered(0, itemType)}" headerText="#{itemType.findAttributeNames(0)}" /> 
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(1, itemType)}"  headerText="#{itemType.findAttributeNames(1)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(2, itemType)}"  headerText="#{itemType.findAttributeNames(2)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(3, itemType)}"  headerText="#{itemType.findAttributeNames(3)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(4, itemType)}"  headerText="#{itemType.findAttributeNames(4)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(5, itemType)}"  headerText="#{itemType.findAttributeNames(5)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(6, itemType)}"  headerText="#{itemType.findAttributeNames(6)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(7, itemType)}"  headerText="#{itemType.findAttributeNames(7)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(8, itemType)}"  headerText="#{itemType.findAttributeNames(8)}" />  
                            <p:column colspan="#{manageTable.findRowSpan(itemType.id)}"  rendered="#{manageTable.columnRendered(9, itemType)}"  headerText="#{itemType.findAttributeNames(9)}" />    
                        </p:row>
                    </p:columnGroup>
                    
                    <p:column>  
                        <h:outputText value="#{item.barcode}"/>  
                    </p:column>
                    <p:column>  
                        <h:outputText value="#{item.condition}"/>  
                    </p:column>
                    <p:column>  
                        <h:outputText value="#{item.status}"/>  
                    </p:column>
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(0)}"/>  
                    </p:column>
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(1)}"/>  
                    </p:column> 
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(2)}"/>  
                    </p:column> 
                    <p:column colspan="3">  
                        <h:outputText value="#{item.findPrimaryValue(3)}"/>  
                    </p:column> 
                    <p:column>
                        <h:outputText value="#{item.findPrimaryValue(4)}"/>  
                    </p:column> 
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(5)}"/>  
                    </p:column> 
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(6)}"/>  
                    </p:column> 
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(7)}"/>  
                    </p:column> 
                    <p:column>  
                        <h:outputText value="#{item.findPrimaryValue(8)}"/>  
                    </p:column> 
                    <p:column colspan="3">  
                        <h:outputText value="#{item.findPrimaryValue(9)}"/>  
                    </p:column> 
                </p:subTable>  
                <f:facet name="footer">
                    <div style="display:flex; justify-content: flex-start">
                        <p:commandButton actionListener="#{navigator.setAccountIndex(1)}" ajax="false" value="Add" styleClass="basic-buttons">
                            <f:ajax render=":accounts"/>
                        </p:commandButton>
                        <p:commandButton action="#{navigator.setAccountIndex(accountsController.editAccountSelected())}" ajax="false" value="Edit" styleClass="basic-buttons">
                            <f:ajax render=":accounts"/>
                        </p:commandButton>
                        <p:commandButton action="#{accountsController.deleteAccount()}" ajax="false" value="Delete" styleClass="basic-buttons">
                            <f:ajax render=":accounts"/>
                        </p:commandButton>
                    </div>
                </f:facet>
            </p:dataTable>
            <p:messages for="accountsTable" style="color:red" />
        </h:form>
    </div>
</ui:composition>

